<!DOCTYPE html >
<html>
        <head>
          <title>loopfor - com.loopfor</title>
          <meta name="description" content="loopfor - com.loopfor" />
          <meta name="keywords" content="loopfor com.loopfor" />
          <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
          
      <link href="../../lib/template.css" media="screen" type="text/css" rel="stylesheet" />
      <link href="../../lib/diagrams.css" media="screen" type="text/css" rel="stylesheet" id="diagrams-css" />
      <script type="text/javascript" src="../../lib/jquery.js" id="jquery-js"></script>
      <script type="text/javascript" src="../../lib/jquery-ui.js"></script>
      <script type="text/javascript" src="../../lib/template.js"></script>
      <script type="text/javascript" src="../../lib/tools.tooltip.js"></script>
      
      <script type="text/javascript">
         if(top === self) {
            var url = '../../index.html';
            var hash = 'com.loopfor.package';
            var anchor = window.location.hash;
            var anchor_opt = '';
            if (anchor.length >= 1)
              anchor_opt = '@' + anchor.substring(1);
            window.location.href = url + '#' + hash + anchor_opt;
         }
   	  </script>
    
        </head>
        <body class="value">
      <div id="definition">
        <img src="../../lib/package_big.png" />
        <p id="owner"><a href="../package.html" class="extype" name="com">com</a></p>
        <h1>loopfor</h1><span class="permalink">
      <a href="../../index.html#com.loopfor.package" title="Permalink" target="_top">
        <img src="../../lib/permalink.png" />
      </a>
    </span>
      </div>

      <h4 id="signature" class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">package</span>
      </span>
      <span class="symbol">
        <span class="name">loopfor</span>
      </span>
      </h4>
      
          <div id="comment" class="fullcommenttop"></div>
        

      <div id="mbrsel">
        <div id="textfilter"><span class="pre"></span><span class="input"><input id="mbrsel-input" type="text" accesskey="/" /></span><span class="post"></span></div>
        
        
        <div id="visbl">
            <span class="filtertype">Visibility</span>
            <ol><li class="public in"><span>Public</span></li><li class="all out"><span>All</span></li></ol>
          </div>
      </div>

      <div id="template">
        <div id="allMembers">
        

        

        

        <div id="values" class="values members">
              <h3>Value Members</h3>
              <ol><li name="com.loopfor.scalop" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="scalop"></a>
      <a id="scalop:scalop"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">package</span>
      </span>
      <span class="symbol">
        <a href="scalop/package.html"><span class="name">scalop</span></a>
      </span>
      </h4><span class="permalink">
      <a href="../../index.html#com.loopfor.package@scalop" title="Permalink" target="_top">
        <img src="../../lib/permalink.png" />
      </a>
    </span>
      <p class="shortcomment cmt">A simple option parser.</p><div class="fullcomment"><div class="comment cmt"><p>A simple option parser.</p><h6>Overview</h6><p>An option parser is an ordered collection of <a href="scalop/package$$OptName.html" class="extype" name="com.loopfor.scalop.OptName">option name</a> and <a href="scalop/package.html#OptProcessor[+A]=(Seq[String],Map[String,Any])=&gt;(Seq[String],A)" class="extmbr" name="com.loopfor.scalop.OptProcessor">option processor</a> pairs that
matches on a sequence of arguments, yielding a map of option names to option values. As the parser recognizes option names
in the argument sequence, it applies the corresponding processor function to obtain the option value. This process is
repeated until the argument sequence is exhausted or the parser encounters an error.</p><p>An <a href="scalop/package$$OptName.html" class="extype" name="com.loopfor.scalop.OptName">option name</a> can be expressed in both <i>long</i> form (a string with at least two characters) and <i>short</i> form
(a single character). For any given sequence of arguments, <i>long</i> options are detected by the presence of a <code>--</code> prefix
and <i>short</i> options with a <code>-</code> prefix. Examples include <code>--verbose</code> and <code>-v</code>, respectively.</p><p>An <a href="scalop/package.html#OptProcessor[+A]=(Seq[String],Map[String,Any])=&gt;(Seq[String],A)" class="extmbr" name="com.loopfor.scalop.OptProcessor">option processor</a> is an arbitrary function whose purpose is to return a value that gets assigned to the
option name. A processor may consider and absorb subsequent arguments in computing the value, such as <code>--timeout</code> that might
expect the next argument to be an integer.</p><h6>Parser Construction</h6><p>The construction of a parser is best done using the DSL, which is available using the following import statement.</p><pre><span class="kw">import</span> com.loopfor.scalop._</pre><p>The following is a simple parser that demonstrates how the DSL is used to pair an option name with a corresponding
processor.</p><pre><span class="kw">val</span> parser = (<span class="lit">"verbose"</span>, <span class="lit">'v'</span>) ~&gt; set(<span class="kw">true</span>)</pre><p>The <code>~&gt;</code> method implicitly converts the tuple <code>(&quot;verbose&quot;, 'v')</code> into an option, recognizing both long and short forms, and
associates the processor function <code>set(true)</code> with that option.</p><p>Invoking <code>parser</code> with an empty sequence yields the following map of option names to option values. The <code>@</code> option is a
special name containing all non-option values trailing the last option in the argument sequence. This is discussed in more
detail below.</p><pre><span class="lit">"@"</span> -&gt; <span class="std">Seq</span>()</pre><p>Invoking <code>parser</code> with the sequence <code>(&quot;--verbose&quot;)</code> or <code>(&quot;-v&quot;)</code> produces the following map. Notice that the value is
associated with both <i>long</i> and <i>short</i> forms of the option name regardless of which form is specified in the argument
sequence.</p><pre><span class="lit">"verbose"</span> -&gt; <span class="kw">true</span>
<span class="lit">"v"</span> -&gt; <span class="kw">true</span>
<span class="lit">"@"</span> -&gt; <span class="std">Seq</span>()</pre><p>The following is a more advanced parser that demonstrates additional features of the DSL.
<pre>
val parser =
  ("file", 'f') ~> as { (arg, _) => new File(arg) } ++
  "timeout" ~> asInt ~~ 0 ++
  '?' ~> enable ~~ false
</pre></p><p>The <code>~~</code> operator following a processor function associates a default value, which is assigned to the option in the absence
of being specified in the argument sequence.</p><p>The <code>++</code> operator concatenates options, producing a sequence whose order of traversal also defines the order of evaluation.</p><p>Note that, in addition to being defined in both <i>long</i> and <i>short</i> form, an option may also be specified using only one
form. For example, the expression <code>&quot;timeout&quot; ~&gt; {...}</code> creates an option with the <i>long</i> name <code>&quot;timeout&quot;</code>, and
similarly, the expression <code>'t' ~&gt; {...}</code> creates an option with the <i>short</i> name <code>&quot;t&quot;</code>.</p><h6>Parser Behavior</h6><p>Given a sequence of arguments, such as those provided by a shell when supplying arguments to a command line program, an
option parser behaves in the following manner.</p><p>First, default values for each option, if specified, are assigned to the option value map. The parser then recursively
applies the following algorithm as it traverses the argument sequence.</p><p>If the next argument is equal to <code>&quot;--&quot;</code>, the sequence of all subsequent arguments is assigned to the special option name
<code>&quot;@&quot;</code> and the parser terminates, returning the option value map. By convention, the <code>--</code> option is used to explicitly
terminate options so that remaining arguments, which might be prefixed with <code>--</code> or <code>-</code>, are not treated as options.</p><p>If the next argument is either a <i>long</i> or <i>short</i> option name recognized by the parser, the corresponding processor
function is applied to the remaining arguments, yielding a value, which is then associated with the option name, both
<i>long</i> and <i>short</i>, in the option value map. However, if the argument happens to be an option that is not recognized by
the parser, then an <a href="scalop/OptException.html" class="extype" name="com.loopfor.scalop.OptException">exception</a> is thrown. Otherwise, the parser is recursively applied to the remaining
sequence of arguments.</p><p>If the next argument is not an option, implying that it contains neither a <code>--</code> nor a <code>-</code> prefix, then the remaining
argument sequence is assigned to the <code>&quot;@&quot;</code> option and the parser terminates.</p><h6>Option Processors</h6><p>An <a href="scalop/package.html#OptProcessor[+A]=(Seq[String],Map[String,Any])=&gt;(Seq[String],A)" class="extmbr" name="com.loopfor.scalop.OptProcessor">option processor</a> is a function accepting as input:</p><ul><li>a sequence of arguments</li><li>an option value map</li></ul><p>and returning as output a tuple containing:</p><ul><li>a sequence of arguments</li><li>the option value</li></ul><p>The argument sequence provided as input are those that follow the recognized option. For example, given the following
argument sequence:
<pre>
--verbose -F foo.out --timeout 10
</pre></p><p>If <code>-F</code> was recognized by the parser, then the sequence provided to the associated processor function would be:
<pre>
foo.out --timeout 10
</pre></p><p>Since a processor may expect additional arguments following the option, as is the case with <code>-F</code>, the resulting sequence
should be the arguments that follow those absorbed by the processor, which in this case, would be:
<pre>
--timeout 10
</pre></p><p>In cases where a processor requires additional arguments, it is often necessary to perform some degree of validation or
transformation, both of which may fail. Exceptions that propagate beyond the processor function are caught by the parser
and converted to <a href="scalop/OptException.html" class="extype" name="com.loopfor.scalop.OptException">OptException</a>. Additionally, the <code>yell()</code> methods are provided as a convenience for processor
implementations to throw instances of <a href="scalop/OptException.html" class="extype" name="com.loopfor.scalop.OptException">OptException</a>.</p><h6>Predefined Processors</h6><p>A handful of predefined processors are made available to simplify the construction of options.</p><p>For standalone options with no additional arguments, such as <code>--verbose</code>, <a href="scalop/package.html#set[A](fn:=&gt;A):com.loopfor.scalop.package.OptProcessor[A]" class="extmbr" name="com.loopfor.scalop#set">set</a> can be used to explicitly assign a value.</p><pre>(<span class="lit">"verbose"</span>, <span class="lit">'v'</span>) ~&gt; set(<span class="kw">true</span>)</pre><p>Since many standalone options need only convey a boolean value, <a href="scalop/package.html#enable:com.loopfor.scalop.package.OptProcessor[Boolean]" class="extmbr" name="com.loopfor.scalop#enable">enable</a> and <a href="scalop/package.html#disable:com.loopfor.scalop.package.OptProcessor[Boolean]" class="extmbr" name="com.loopfor.scalop#disable">disable</a> are shorthand for <code>set(true)</code> and
<code>set(false)</code>, respectively.</p><p>The <a href="scalop/package.html#as[A](fn:(String,Map[String,Any])=&gt;A):com.loopfor.scalop.package.OptProcessor[A]" class="extmbr" name="com.loopfor.scalop#as">as</a> method constructs a processor in cases where an option requires only a single additional argument, thereby
allowing the signature of the function to be simplified. The simplification comes from removing explicit handling of the
argument sequence.</p><pre>(<span class="lit">"timeout"</span>, <span class="lit">'t'</span>) ~&gt; as { (arg, opts) <span class="kw">=&gt;</span> arg.toShort }</pre><p>In addition, most of the primitive types have a prebuilt processor that performs the necessary conversion:</p><ul><li><a href="scalop/package.html#asBoolean:com.loopfor.scalop.package.OptProcessor[Boolean]" class="extmbr" name="com.loopfor.scalop#asBoolean">asBoolean</a> / <a href="scalop/package.html#asSomeBoolean:com.loopfor.scalop.package.OptProcessor[Option[Boolean]]" class="extmbr" name="com.loopfor.scalop#asSomeBoolean">asSomeBoolean</a></li><li><a href="scalop/package.html#asByte:com.loopfor.scalop.package.OptProcessor[Byte]" class="extmbr" name="com.loopfor.scalop#asByte">asByte</a> / <a href="scalop/package.html#asSomeByte:com.loopfor.scalop.package.OptProcessor[Option[Byte]]" class="extmbr" name="com.loopfor.scalop#asSomeByte">asSomeByte</a></li><li><a href="scalop/package.html#asShort:com.loopfor.scalop.package.OptProcessor[Short]" class="extmbr" name="com.loopfor.scalop#asShort">asShort</a> / <a href="scalop/package.html#asSomeShort:com.loopfor.scalop.package.OptProcessor[Option[Short]]" class="extmbr" name="com.loopfor.scalop#asSomeShort">asSomeShort</a></li><li><a href="scalop/package.html#asInt:com.loopfor.scalop.package.OptProcessor[Int]" class="extmbr" name="com.loopfor.scalop#asInt">asInt</a> / <a href="scalop/package.html#asSomeInt:com.loopfor.scalop.package.OptProcessor[Option[Int]]" class="extmbr" name="com.loopfor.scalop#asSomeInt">asSomeInt</a></li><li><a href="scalop/package.html#asLong:com.loopfor.scalop.package.OptProcessor[Long]" class="extmbr" name="com.loopfor.scalop#asLong">asLong</a> / <a href="scalop/package.html#asSomeLong:com.loopfor.scalop.package.OptProcessor[Option[Long]]" class="extmbr" name="com.loopfor.scalop#asSomeLong">asSomeLong</a></li><li><a href="scalop/package.html#asFloat:com.loopfor.scalop.package.OptProcessor[Float]" class="extmbr" name="com.loopfor.scalop#asFloat">asFloat</a> / <a href="scalop/package.html#asSomeFloat:com.loopfor.scalop.package.OptProcessor[Option[Float]]" class="extmbr" name="com.loopfor.scalop#asSomeFloat">asSomeFloat</a></li><li><a href="scalop/package.html#asDouble:com.loopfor.scalop.package.OptProcessor[Double]" class="extmbr" name="com.loopfor.scalop#asDouble">asDouble</a> / <a href="scalop/package.html#asSomeDouble:com.loopfor.scalop.package.OptProcessor[Option[Double]]" class="extmbr" name="com.loopfor.scalop#asSomeDouble">asSomeDouble</a></li><li><a href="scalop/package.html#asString:com.loopfor.scalop.package.OptProcessor[String]" class="extmbr" name="com.loopfor.scalop#asString">asString</a> / <a href="scalop/package.html#asSomeString:com.loopfor.scalop.package.OptProcessor[Option[String]]" class="extmbr" name="com.loopfor.scalop#asSomeString">asSomeString</a>
</li></ul></div></div>
    </li></ol>
            </div>

        

        
        </div>

        <div id="inheritedMembers">
        
        
        </div>

        <div id="groupedMembers">
        <div class="group" name="Ungrouped">
              <h3>Ungrouped</h3>
              
            </div>
        </div>

      </div>

      <div id="tooltip"></div>

      <div id="footer">  </div>


    </body>
      </html>